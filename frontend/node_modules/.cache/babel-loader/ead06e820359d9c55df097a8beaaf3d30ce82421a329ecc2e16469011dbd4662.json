{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\marco\\\\Desktop\\\\ecommerce\\\\ecommerce\\\\frontend\\\\src\\\\components\\\\cart_card.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./css/cart_card.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CartCard({\n  product,\n  quantity,\n  onRemoveFromCart,\n  getTotalPrice\n}) {\n  _s();\n  const [isMobileView, setIsMobileView] = useState(window.innerWidth <= 800);\n\n  // Funzione che verifica quando la dimensione dello schermo è minore di 800px\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobileView(window.innerWidth <= 800);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  // Funzione per ottenere l'id dell'utente dal database\n  async function getUserId(token) {\n    try {\n      const response = await axios.get('/api/user/', {\n        // Risposta del server Django\n        headers: {\n          'Authorization': `Bearer ${token}` // Imposta il token JWT come header della richiesta\n        }\n      });\n      return response.data.user_id; // Restituisci l'id dell'utente come risultato della funzione\n    } catch (error) {\n      console.error('Failed to fetch user data:', error); // Errore nella fetch dei dati\n    }\n  }\n\n  // Funzione per rimuovere un prodotto dal carrello\n  async function removeFromCart() {\n    try {\n      const token = localStorage.getItem('token'); // Ottieni il token JWT dal local storage\n      const userId = await getUserId(token); // ID dell'utente ottenuto dalla funzione getUserId()\n\n      const headers = {\n        'Authorization': `Bearer ${token}` // Imposta il token JWT come header della richiesta\n      };\n\n      // Oggetto che condiene i parametri per la richiesta al server Django\n      const requestData = {\n        user_id: userId,\n        product_id: product.product_id\n      };\n      const response = await axios.post('/api/cart/remove-from-cart/', requestData, {\n        headers\n      }); // RIsposta del server Django\n      onRemoveFromCart(product.product_id);\n    } catch (error) {\n      console.error(\"Error while removing product from the cart: \", error); // Errore nella rimozione del prodotto dal carrello\n    }\n  }\n  if (!isMobileView) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: product.img,\n        alt: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u20AC \", product.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: quantity\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"remove-from-cart-btn\",\n        onClick: removeFromCart,\n        children: [\"Rimuovi\", /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          fill: \"currentColor\",\n          className: \"bi bi-x-lg\",\n          viewBox: \"0 0 16 16\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mobile-cart-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top-mobile-cart-card\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: product.img,\n          alt: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom-mobile-cart-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u20AC \", product.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Quantit\\xE0: \", quantity]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"remove-from-cart-btn\",\n          onClick: removeFromCart,\n          children: [\"Rimuovi\", /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            width: \"16\",\n            height: \"16\",\n            fill: \"currentColor\",\n            className: \"bi bi-x-lg\",\n            viewBox: \"0 0 16 16\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this);\n  }\n}\n_s(CartCard, \"zrUgF3sHnydeBo6AsbIZMqUFisA=\");\n_c = CartCard;\nexport default CartCard;\nvar _c;\n$RefreshReg$(_c, \"CartCard\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","CartCard","product","quantity","onRemoveFromCart","getTotalPrice","_s","isMobileView","setIsMobileView","window","innerWidth","handleResize","addEventListener","removeEventListener","getUserId","token","response","get","headers","data","user_id","error","console","removeFromCart","localStorage","getItem","userId","requestData","product_id","post","className","children","src","img","alt","name","fileName","_jsxFileName","lineNumber","columnNumber","price","onClick","xmlns","width","height","fill","viewBox","d","_c","$RefreshReg$"],"sources":["C:/Users/marco/Desktop/ecommerce/ecommerce/frontend/src/components/cart_card.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./css/cart_card.css\";\r\n\r\nfunction CartCard({ product, quantity, onRemoveFromCart, getTotalPrice }) {\r\n    const [isMobileView, setIsMobileView] = useState(window.innerWidth <= 800);\r\n\r\n    // Funzione che verifica quando la dimensione dello schermo è minore di 800px\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            setIsMobileView(window.innerWidth <= 800);\r\n        };\r\n\r\n        window.addEventListener('resize', handleResize);\r\n\r\n        return () => {\r\n            window.removeEventListener('resize', handleResize);\r\n        }\r\n    }, []);\r\n\r\n    // Funzione per ottenere l'id dell'utente dal database\r\n    async function getUserId(token) {\r\n        try {\r\n            const response = await axios.get('/api/user/', { // Risposta del server Django\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}` // Imposta il token JWT come header della richiesta\r\n                }\r\n            });\r\n            return response.data.user_id; // Restituisci l'id dell'utente come risultato della funzione\r\n        } catch (error) {\r\n            console.error('Failed to fetch user data:', error); // Errore nella fetch dei dati\r\n        }\r\n    }\r\n\r\n    // Funzione per rimuovere un prodotto dal carrello\r\n    async function removeFromCart() {\r\n        try {\r\n            const token = localStorage.getItem('token'); // Ottieni il token JWT dal local storage\r\n            const userId = await getUserId(token); // ID dell'utente ottenuto dalla funzione getUserId()\r\n\r\n            const headers = {\r\n                'Authorization': `Bearer ${token}` // Imposta il token JWT come header della richiesta\r\n            };\r\n\r\n            // Oggetto che condiene i parametri per la richiesta al server Django\r\n            const requestData = {\r\n                user_id: userId,\r\n                product_id: product.product_id,\r\n            }\r\n\r\n            const response = await axios.post('/api/cart/remove-from-cart/', requestData, { headers }); // RIsposta del server Django\r\n            onRemoveFromCart(product.product_id);\r\n        } catch (error) {\r\n            console.error(\"Error while removing product from the cart: \", error); // Errore nella rimozione del prodotto dal carrello\r\n        }\r\n    }\r\n\r\n    if (!isMobileView) {\r\n        return (\r\n            <div className=\"cart-card\">\r\n                <img src={product.img} alt={product.name} />\r\n                <p>{product.name}</p>\r\n                <p>€ {product.price}</p>\r\n                <p>{quantity}</p>\r\n                <button className=\"remove-from-cart-btn\" onClick={removeFromCart}>\r\n                    Rimuovi\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-x-lg\" viewBox=\"0 0 16 16\">\r\n                        <path d=\"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z\" />\r\n                    </svg>\r\n                </button>\r\n            </div>\r\n        );\r\n    } else {\r\n        return (\r\n            <div className=\"mobile-cart-card\">\r\n                <div className=\"top-mobile-cart-card\">\r\n                    <img src={product.img} alt={product.name} />\r\n                </div>\r\n                <div className=\"bottom-mobile-cart-card\">\r\n                    <p>{product.name}</p>\r\n                    <p>€ {product.price}</p>\r\n                    <p>Quantità: {quantity}</p>\r\n                    <button className=\"remove-from-cart-btn\" onClick={removeFromCart}>\r\n                        Rimuovi\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-x-lg\" viewBox=\"0 0 16 16\">\r\n                            <path d=\"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z\" />\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CartCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}